<div id="customerAccountTableDiv" ngStyle="">
    <div class="ui-grid ui-grid-responsive ui-grid-pad ui-fluid" style="margin: 10px 0px">
        <div class="ui-grid-row">
            <div class="ui-grid-col-12">
                <p-dataTable [value]="rows"
                             [ngClass]="{'editing-table': crudOperation != CrudOperation.NONE }"
                             selectionMode="single"
                             [(selection)]="selectedModelObject"
                             (onRowSelect)="onRowSelect($event)"
                             (onRowUnselect)="onRowUnSelect($event)"
                             [totalRecords]="totalRows"
                             [loading]="loading"
                             [lazy]="true"
                             (onRowDblclick)="onRowDoubleClick($event)"
                             [responsive]="true">

                    <!--
                    public tickerSymbol: string = undefined;
                    public symbolClass: string = undefined;
                    public costBasis: number = undefined;
                    public holdingType: string = undefined;
                    public quantity: number = undefined;
                    public todayGainLossDollar: number = undefined;
                    public todayGainLossPercentage: number = undefined;
                    public totalGainLossDollar: number = undefined;
                    public totalGainLossPercentage: number = undefined;
                    -->
                    <!----------------------------------------------------------------------------------------------------------
                    TICKER SYMBOL
                    ------------------------------------------------------------------------------------------------------------>
                    <p-column id="tickerSymbolColumn"
                              field="tickerSymbol"
                              header="Ticker"
                              [style]="{'width':'80px'}"
                              [sortable]="true">
                    </p-column>

                    <!----------------------------------------------------------------------------------------------------------
                    QUANTITY
                    ------------------------------------------------------------------------------------------------------------>
                    <p-column id="quantity"
                              field="quantity"
                              header="Shares"
                              [style]="{'width':'80px','text-align':'right'}">
                    </p-column>

                    <!----------------------------------------------------------------------------------------------------------
                    LAST PRICE
                    ------------------------------------------------------------------------------------------------------------>
                    <p-column id="lastPrice"
                              field="lastPrice"
                              header="Last Price"
                              [style]="{'width':'80px','text-align':'right'}">
                        <ng-template let-col let-stockNotes="rowData" pTemplate="body">
                            <div *ngIf="isFetchingQuote( stockNotes )">
                                Loading...
                            </div>
                            <div *ngIf="!isFetchingQuote( stockNotes )">
                                {{stockNotes[col.field] | currency: 'USD': true }}
                            </div>
                        </ng-template>
                    </p-column>

                    <!----------------------------------------------------------------------------------------------------------
                    LAST PRICE DATE
                    ------------------------------------------------------------------------------------------------------------>
                    <p-column id="lastPriceChangeColumn"
                              field="lastPriceChange"
                              header="Last Price Change "
                              [style]="{'width':'80px'}"
                              [sortable]="true">
                        <ng-template let-col let-stockNotes="rowData" pTemplate="body">
                            {{stockNotes[col.field] | date: 'y-MM-dd h:mm a' }}
                        </ng-template>
                    </p-column>

                    <!----------------------------------------------------------------------------------------------------------
                    TODAY GAIN/LOSS PERCENTAGE
                    ------------------------------------------------------------------------------------------------------------>
                    <p-column id="todayGainLossDollar"
                              field="todayGainLossDollar"
                              header="Today GL$"
                              [style]="{'width':'80px','text-align':'right'}">
                    </p-column>

                    <!----------------------------------------------------------------------------------------------------------
                    TODAY GAIN/LOSS DOLLARS
                    ------------------------------------------------------------------------------------------------------------>
                    <p-column id="todayGainLossPercentage"
                              field="todayGainLossPercentage"
                              header="Today GL%"
                              [style]="{'width':'80px','text-align':'right'}">
                    </p-column>


                    <!----------------------------------------------------------------------------------------------------------
                    TOTAL GAIN/LOSS DOLLARS
                    ------------------------------------------------------------------------------------------------------------>
                    <p-column id="totalGainLossDollar"
                              field="totalGainLossDollar"
                              header="Total GL$"
                              [style]="{'width':'80px','text-align':'right'}">
                    </p-column>

                    <!----------------------------------------------------------------------------------------------------------
                    TOTAL GAIN/LOSS DOLLARS
                    ------------------------------------------------------------------------------------------------------------>
                    <p-column id="totalGainLossPercentage"
                              field="totalGainLossPercentage"
                              header="Today GL%"
                              [style]="{'width':'80px','text-align':'right'}">
                    </p-column>

                    <!----------------------------------------------------------------------------------------------------------
                    AVG UPSIDE PERCENTAGE
                    ------------------------------------------------------------------------------------------------------------>
                    <p-column id="avgUpsidePercent"
                              header="Avg Upside"
                              [style]="{'width':'40px','text-align':'right'}"
                              [sortable]="true">
                        <ng-template let-col let-stockAnalystConsensus="rowData" pTemplate="body">
                            {{calcAvgUpsidePercent( stockAnalystConsensus ) | percent:'1.0-0' }}
                        </ng-template>
                    </p-column>

                    <!----------------------------------------------------------------------------------------------------------
                    ANALYST BUY COUNT
                    ------------------------------------------------------------------------------------------------------------>
                    <p-column id=""
                              field="analystByCount"
                              header="Analyst BSH"
                              [style]="{'width':'80px'}">
                        <ng-template let-col let-stockAnalystConsensus="rowData" pTemplate="body">
                            <span class="strongBuy">       {{stockAnalystConsensus['analystStrongBuyCount']}}</span><!--
                            --><span class="buy">          {{stockAnalystConsensus['analystBuyCount']}}</span><!--
                            --><span class="hold">         {{stockAnalystConsensus['analystHoldCount']}}</span><!--
                            --><span class="underPerform"> {{stockAnalystConsensus['analystUnderPerformCount']}}</span><!--
                            --><span class="sell">         {{stockAnalystConsensus['analystSellCount']}}</span>
                        </ng-template>
                    </p-column>

                    <!----------------------------------------------------------------------------------------------------------
                    HIGH ANALYST PRICE
                    ------------------------------------------------------------------------------------------------------------>
                    <p-column id="highAnalystPrice"
                              field="highAnalystPriceTarget"
                              header="High Analyst PT"
                              [style]="{'width':'40px','text-align':'right'}"
                              [sortable]="false">
                        <ng-template let-col let-stockAnalystConsensus="rowData" pTemplate="body">
                            {{stockAnalystConsensus[col.field] | currency: 'USD' : true }}
                        </ng-template>
                    </p-column>

                    <!----------------------------------------------------------------------------------------------------------
                    AVG ANALYST PRICE
                    ------------------------------------------------------------------------------------------------------------>
                    <p-column id="avgAnalystPrice"
                              field="avgAnalystPriceTarget"
                              header="Avg Analyst PT"
                              [style]="{'width':'40px','text-align':'right'}"
                              [sortable]="false">
                        <ng-template let-col let-stockAnalystConsensus="rowData" pTemplate="body">
                            {{stockAnalystConsensus[col.field] | currency: 'USD' : true }}
                        </ng-template>
                    </p-column>

                    <!----------------------------------------------------------------------------------------------------------
                    LOW ANALYST PRICE
                    ------------------------------------------------------------------------------------------------------------>
                    <p-column id="lowAnalystPrice"
                              field="lowAnalystPriceTarget"
                              header="Low Analyst PT"
                              [style]="{'width':'40px','text-align':'right'}"
                              [sortable]="false">
                        <ng-template let-col let-stockAnalystConsensus="rowData" pTemplate="body">
                            {{stockAnalystConsensus[col.field] | currency: 'USD' : true }}
                        </ng-template>
                    </p-column>
                    <!----------------------------------------------------------------------------------------------------------
                    PERCENT OF CHANGE
                    ------------------------------------------------------------------------------------------------------------>
                    <!--
                    <p-column id="percentChange"
                              field="percentChange"
                              header="% Change Since Entered"
                              [style]="{'width':'80px','text-align':'right'}">
                        <ng-template let-col let-stockNotes="rowData" pTemplate="body">
                            <div class="positiveGain" *ngIf="calculatePercentChange( stockNotes ) >= 0.0">
                                {{calculatePercentChange( stockNotes ) | percent: '1.2-2' }}
                            </div>
                            <div class="negativeGain" *ngIf="calculatePercentChange( stockNotes ) < 0.0">
                                {{calculatePercentChange( stockNotes ) | percent: '1.2-2' }}
                            </div>
                        </ng-template>
                    </p-column>
                    -->

                    <p-footer>
                        <stock-position-table-buttons>
                        </stock-position-table-buttons>
                    </p-footer>
                </p-dataTable>
            </div>
        </div>
    </div>
</div>
