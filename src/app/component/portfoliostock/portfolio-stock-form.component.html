<div *ngIf="dataLoaded">
    <form id="stockForm" [formGroup]="formGroup">
        <p-tabView id="tabView">
            <!--
            M A I N  T A B
            -->
            <p-tabPanel header="Main">
                <fieldset>
                    <div class="ui-grid ui-grid-responsive ui-grid-pad ui-fluid" style="margin: 10px 0px">
                       <!-- <div class="ui-grid-row">
                            <div class="ui-grid-col-12">
                                <i>Enter your ticker symbol directly or enter the company name</i>
                            </div>
                        </div>-->
                        <div *ngIf="isCrudInsertOperation()" class="ui-grid-row">
                            <div class="ui-grid-col-3">
                            </div>
                            <div class="ui-grid-col-9">
                                NOTE: If you enter a ticker symbol and it does not show up in the list, press the tab key to
                                initiate a further search.
                            </div>
                        </div>
                        <div *ngIf="isCrudInsertOperation()" class="ui-grid-row crud-form">
                            <div class="crud-form-label ui-grid-col-3">
                                <label class="crud-form" for="stockSearch">Stock Search:</label>
                            </div>
                            <div class="ui-grid-col-9">
                                <stock-autocomplete id="stockSearch"
                                                    [formGroup]="formGroup"
                                                    [formControlName]="tickerSymbol"
                                                    (stockSelected)="onStockSelected( $event )"
                                                    (focusout)="onTickerSymbolLostFocus()">
                                </stock-autocomplete>
                            </div>
                        </div>

                        <div class="ui-grid-row crud-form">
                            <div class="crud-form-label ui-grid-col-3">
                                <label class="crud-form" for="tickerSymbolColumn">Ticker Symbol:</label>
                            </div>
                            <div id="tickerSymbolColumn" class="ui-grid-col-1">
                                {{modelObject.tickerSymbol}}
                            </div>
                        </div>

                        <div [hidden]="formGroup.controls['tickerSymbol'].valid" class="ui-grid-row">
                            <div class="ui-message ui-messages-error ui-corner-all" *ngIf="isTickerSymbolInvalid()">
                                <i class="fa fa-close"></i>
                                Ticker Symbol is required
                            </div>
                        </div>

                        <div class="crud-form ui-grid-row">
                            <div class="crud-form-label ui-grid-col-3">
                                <label class="crud-form" for="companyNameColumn">Company:</label>
                            </div>
                            <div id="companyNameColumn" class="ui-grid-col-9">
                                {{modelObject.companyName}}
                            </div>
                        </div>

                        <div class="ui-grid-row">
                            <div class="crud-form-label ui-grid-col-3">
                                <label class="crud-form" for="lastPriceColumn">Last Price:</label>
                            </div>
                            <div id="lastPriceColumn" class="ui-grid-col-3">
                                {{modelObject.lastPrice}}
                            </div>
                        </div>

                        <div class="ui-grid-row">
                            <div class="crud-form-label ui-grid-col-3">
                                <label class="crud-form" for="numberOfShares">Shares:</label>
                            </div>
                            <div class="ui-grid-col-9">
                                <p-inputMask
                                    id="numberOfShares"
                                    class="crud-form"
                                    formControlName="numberOfShares"
                                    [(ngModel)]="modelObject.numberOfShares"
                                    [style]="{'width':'60px'}"
                                    maxLength="6"
                                    placeholder=""
                                    mask="9?99999">
                                </p-inputMask>
                            </div>
                        </div>

                        <div class="ui-grid-row">
                            <div class="crud-form-label ui-grid-col-3">
                                <label class="crud-form" for="costBasisColumn">Cost Basis:</label>
                            </div>
                            <div id="costBasisColumn" class="ui-grid-col-9">
                                <p-inputMask
                                    formControlName="costBasis"
                                    class="crud-form"
                                    [(ngModel)]="modelObject.costBasis"
                                    [style]="{'width':'70px'}"
                                    maxLength="6"
                                    placeholder="$"
                                    unmask="true"
                                    mask="$9?99999">
                                </p-inputMask>
                            </div>
                        </div>
                        <div class="ui-grid-row">
                            <div class="crud-form-label ui-grid-col-3">
                                <label class="crud-form" for="realizedGain">Realized Gain:</label>
                            </div>
                            <div class="ui-grid-col-9">
                                <p-inputMask
                                        id="realizedGain"
                                        class="crud-form"
                                        formControlName="realizedGain"
                                        [(ngModel)]="modelObject.realizedGain"
                                        [style]="{'width':'70px'}"
                                        maxLength="6"
                                        placeholder="$"
                                        unmask="true"
                                        mask="$9?99999">
                                </p-inputMask>
                            </div>
                        </div>

                        <div class="ui-grid-row">
                            <div class="crud-form-label ui-grid-col-3">
                                <label class="crud-form" for="realizeLoss">Realized Loss:</label>
                            </div>
                            <div class="ui-grid-col-9">
                                <p-inputMask
                                        id="realizeLoss"
                                        class="crud-form"
                                        formControlName="realizedLoss"
                                        [(ngModel)]="modelObject.realizedLoss"
                                        [style]="{'width':'70px'}"
                                        maxLength="6"
                                        placeholder="$"
                                        unmask="true"
                                        mask="$9?99999">
                                </p-inputMask>
                            </div>
                        </div>
                    </div>
                </fieldset>
            </p-tabPanel>
            <!--
            S T O P  L O S S  /  P R O F I T  T A K I N G
            -->
            <p-tabPanel header="Sector/Orders">
                <div class="ui-grid ui-grid-responsive ui-grid-pad ui-fluid" style="margin: 10px 0px">
                    <div class="ui-grid-row">
                        <div class="crud-form-label ui-grid-col-2">
                            <label for="realizeLoss" for="sector">Sector:</label>
                        </div>
                        <div class="ui-grid-col-3">
                            <p-dropdown
                                    id="sector"
                                    class="crud-form"
                                    formControlName="sector"
                                    [style]="{'width':'175px', 'position':'fixed', 'z-index':'1000', 'overflow': 'visible'}"
                                    (onChange)="onStockSectorChange($event);"
                                    [options]="stockSectors"
                                    [(ngModel)]="modelObject.sector">
                            </p-dropdown>
                        </div>
                        <div class="crud-form-label ui-grid-col-3">
                            <label class="crud-form" for="subSector">Sub Sector:</label>
                        </div>
                        <div class="ui-grid-col-3">
                            <p-dropdown
                                    id="subSector"
                                    class="crud-form"
                                    formControlName="subSector"
                                    [style]="{'width':'175px', 'position':'fixed', 'z-index':'1001', 'overflow':'visible'}"
                                    [options]="stockSubSectors"
                                    [(ngModel)]="modelObject.subSector">
                            </p-dropdown>
                        </div>
                    </div>
                    <div class="ui-grid-row">
                        <br/>
                    </div>
                    <div class="ui-grid-row">
                        <div class="ui-grid-col-2">
                        </div>
                        <div class="ui-grid-col-10">
                            NOTE: The following information will be displayed when you view the stocks in your portfolio
                            so that you can quickly identify which stocks are protected by such orders and
                            those that are not.
                        </div>
                    </div>
                    <div class="ui-grid-row">
                        <div class="crud-form-label ui-grid-col-4">
                            <label class="crud-form" for="stopLossPrice">Stop Loss Price:</label>
                        </div>
                        <div class="ui-grid-col-8">
                            <p-inputMask
                                id="stopLossPrice"
                                class="crud-form"
                                formControlName="stopLossPrice"
                                [(ngModel)]="modelObject.stopLossPrice"
                                [style]="{'width':'70px'}"
                                maxLength="6"
                                placeholder="$"
                                mask="$9?99999">
                            </p-inputMask>
                        </div>
                    </div>

                    <div class="ui-grid-row">
                        <div class="crud-form-label ui-grid-col-4">
                            <label class="crud-form" for="stopLossShares">Stop Loss Shares:</label>
                        </div>
                        <div class="ui-grid-col-8">
                            <p-inputMask
                                id="stopLossShares"
                                class="crud-form"
                                formControlName="stopLossShares"
                                [(ngModel)]="modelObject.stopLossShares"
                                [style]="{'width':'60px'}"
                                maxLength="6"
                                placeholder=""
                                mask="9?99999">
                            </p-inputMask>
                        </div>
                    </div>

                    <div class="ui-grid-row">
                        <div class="crud-form-label ui-grid-col-4">
                            <label class="crud-form" for="profitTakingPrice">Profit Taking Price:</label>
                        </div>
                        <div class="ui-grid-col-8">
                            <p-inputMask
                                id="profitTakingPrice"
                                class="crud-form"
                                formControlName="profitTakingPrice"
                                [(ngModel)]="modelObject.profitTakingPrice"
                                [style]="{'width':'70px'}"
                                maxLength="6"
                                placeholder="$"
                                mask="$9?99999">
                            </p-inputMask>
                        </div>
                    </div>

                    <div class="ui-grid-row">
                        <div class="crud-form-label ui-grid-col-4">
                            <label class="crud-form" for="profitTakingShares">Profit Taking Shares:</label>
                        </div>
                        <div class="ui-grid-col-8">
                            <p-inputMask
                                id="profitTakingShares"
                                class="crud-form"
                                formControlName="profitTakingShares"
                                [(ngModel)]="modelObject.profitTakingShares"
                                [style]="{'width':'60px'}"
                                maxLength="6"
                                placeholder=""
                                mask="9?99999">
                            </p-inputMask>
                        </div>
                    </div>
                </div>
            </p-tabPanel>
        </p-tabView>
    </form>
</div>
