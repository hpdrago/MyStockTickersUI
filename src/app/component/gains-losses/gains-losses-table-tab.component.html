<p-panel>
    <div class="crud-form ui-grid-row">
        <div class="ui-grid-col-4 ui-state-default">
            <stock-search (stockSelected)="onStockSelected( $event )"
                          (resetButtonClick)="onResetButtonClick()">
            </stock-search>
        </div>
        <div class="ui-grid-col-8 ui-state-default">
        </div>
    </div>
    <p-dataTable [value]="rows"
                 selectionMode="single"
                 [(selection)]="selectedModelObject"
                 (onRowSelect)="onRowSelect($event)"
                 (onRowUnselect)="onRowUnSelect($event)"
                 [paginator]="true"
                 [pageLinks]="3"
                 [rowsPerPageOptions]="[20,30,40]"
                 [rows]="20"
                 [totalRecords]="totalRows"
                 [loading]="loading"
                 [lazy]="true"
                 (onLazyLoad)="lazyLoadTable($event)"
                 (onRowDblclick)="onRowDoubleClick($event)"
                 [responsive]="true">

        <p-header>
            <gains-losses-table-buttons>
            </gains-losses-table-buttons>
        </p-header>

        <!----------------------------------------------------------------------------------------------------------
        TICKER SYMBOL
        ------------------------------------------------------------------------------------------------------------>
        <p-column id="tickerSymbol"
                  field="tickerSymbol"
                  header="Ticker"
                  [style]="{'width':'10px'}"
                  [sortable]="true">
        </p-column>

        <!----------------------------------------------------------------------------------------------------------
        COMPANY NAME
        ------------------------------------------------------------------------------------------------------------>
        <p-column id="companyName"
                  field="companyName"
                  header="Company Name"
                  [style]="{'width':'150px'}"
                  [sortable]="false">
            <ng-template let-col let-gainsLosses="rowData" pTemplate="body">
                <stock-company [tickerSymbol]="gainsLosses.tickerSymbol"
                               (stockCompanyChange)="gainsLosses.setStockCompany($event)">
                    {{gainsLosses.stockCompany.companyName}}
                </stock-company>
            </ng-template>
        </p-column>

        <!----------------------------------------------------------------------------------------------------------
        ACCOUNT NAME
        ------------------------------------------------------------------------------------------------------------>
        <p-column id="accountName"
                  field="linkedAccount.accountName"
                  header="Account Name"
                  [style]="{'width':'50px'}"
                  [sortable]="true">
        </p-column>

        <!----------------------------------------------------------------------------------------------------------
        ACCOUNT NUMBER
        ------------------------------------------------------------------------------------------------------------>
        <p-column id="accountNumber"
                  field="linkedAccount.accountNumber"
                  header="Account Number"
                  [style]="{'width':'50px'}"
                  [sortable]="true">
        </p-column>
        <!----------------------------------------------------------------------------------------------------------
        GAINS
        ------------------------------------------------------------------------------------------------------------>
        <p-column id="gains"
                  field="gains"
                  header="Realized Gains"
                  [style]="{'width':'50px','text-align':'right'}">
            <ng-template let-col let-gainsLosses="rowData" pTemplate="body">
                <gain-loss-currency [currencyValue]="gainsLosses[col.field]">
                </gain-loss-currency>
            </ng-template>
        </p-column>

        <!----------------------------------------------------------------------------------------------------------
        LOSSES
        ------------------------------------------------------------------------------------------------------------>
        <p-column id="losses"
                  field="losses"
                  header="Realized losses"
                  [style]="{'width':'50px','text-align':'right'}">
            <ng-template let-col let-gainsLosses="rowData" pTemplate="body">
                <gain-loss-currency [currencyValue]="gainsLosses[col.field]">
                </gain-loss-currency>
            </ng-template>
        </p-column>

        <!----------------------------------------------------------------------------------------------------------
        TOTAL
        ------------------------------------------------------------------------------------------------------------>
        <p-column id="totalGainsLosses"
                  field="totalGainsLosses"
                  header="Total Gains/Losses"
                  [style]="{'width':'50px','text-align':'right'}">
            <ng-template let-col let-gainsLosses="rowData" pTemplate="body">
                <gain-loss-currency [currencyValue]="gainsLosses[col.field]">
                </gain-loss-currency>
            </ng-template>
        </p-column>

        <p-footer>
            <gains-losses-table-buttons>
            </gains-losses-table-buttons>
        </p-footer>
    </p-dataTable>

    <div *ngIf="!isCrudNoneOperation()">
        <gains-losses-dialog>
        </gains-losses-dialog>
    </div>
    <gains-losses-import-dialog>
    </gains-losses-import-dialog>
</p-panel>
